# src/compass_brca/pipeline_config.py
# DEFINITIVE AND COMPLETE VERSION V7.1 ("GPS-Calibrated" Edition)
from pathlib import Path

# --- PROJECT ROOT DEFINITION ---
# This is the new, robust, self-aware method. It finds its own location
# deep inside the 'venv' after installation, and from there, it correctly
# deduces the true project root. This works for ALL scripts.
# For a 'src' layout where the package is at venv/Lib/site-packages/compass_brca,
# the project root is 4 levels up.
try:
    # This is the production logic, for when the package is installed in the venv.
    PROJECT_ROOT = Path(__file__).resolve().parents[4] 
except IndexError:
    # This is a fallback for local development, if the file is still in the 'src' folder.
    PROJECT_ROOT = Path(__file__).resolve().parents[2]
# --- END DEFINITION ---

# --- Core Data Directories (Now correctly defined) ---
RAW_DATA_DIR = PROJECT_ROOT / "01_data_raw"
INTERIM_DATA_DIR = PROJECT_ROOT / "02_data_interim"
CULPRIT_QUARANTINE_DIR = PROJECT_ROOT / "02d_data_culprits_quarantined"
PRIMARY_DATA_DIR = PROJECT_ROOT / "03_data_primary"
FEATURES_FINAL_DIR = PROJECT_ROOT / "04_features_final"

# --- Intelligence & Operational Directories ---
LOGS_DIR = PROJECT_ROOT / "logs"
REPORTS_DIR = PROJECT_ROOT / "reports"
MANIFESTS_DIR = PROJECT_ROOT / "00_manifests"

# --- Key Output Files ---
MASTER_CROSSWALK_PATH = PRIMARY_DATA_DIR / "master_crosswalk.parquet"
OUTPUT_NANO_FILE = PRIMARY_DATA_DIR / "clean_drug_data.parquet"
OUTPUT_GENOMIC_FILE = PRIMARY_DATA_DIR / "clean_rich_genomic_features.parquet"
OUTPUT_TCGA_FEATURES = PRIMARY_DATA_DIR / "clean_tcga_mutation_features.parquet"
OUTPUT_FUSED_TABLE = FEATURES_FINAL_DIR / "master_fused_features.parquet"